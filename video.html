<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ç¤ºç¯„å½±ç‰‡ï½œå°„ç®­æ•™å­¸æ¢ç©¶å¯¦é©—å®¤</title>
<style>
  :root{
    --bg:#0b1020; --text:#e8ecff; --muted:#b9c1ff; --line:rgba(255,255,255,.15);
    --accent:#7cf0c8; --accent2:#9aa6ff; --warn:#ffcf5a;
  }
  body{margin:0;font-family:system-ui,-apple-system,"PingFang TC","Microsoft JhengHei",sans-serif;background:var(--bg);color:var(--text);}
  .wrap{max-width:980px;margin:auto;padding:22px;}
  .top{display:flex;gap:12px;align-items:center;flex-wrap:wrap;justify-content:space-between;margin-bottom:10px;}
  .pill{border:1px solid var(--line);border-radius:999px;padding:6px 10px;color:var(--muted);font-size:13px;}
  .card{border:1px solid var(--line);border-radius:16px;padding:16px;background:rgba(255,255,255,.03);margin-top:14px;}
  .btn{display:inline-block;margin-top:10px;padding:10px 14px;border-radius:999px;background:linear-gradient(90deg,var(--accent),var(--accent2));color:#071018;font-weight:800;text-decoration:none;}
  .link{color:var(--accent2);text-decoration:none}
  .grid{display:grid;grid-template-columns:1fr;gap:12px}
  .teacherBox{display:none;border:1px dashed rgba(255,207,90,.6);background:rgba(255,207,90,.08);border-radius:16px;padding:14px;color:var(--muted);line-height:1.7}
  .teacherBox b{color:var(--warn)}
  .iframeWrap{position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:14px;border:1px solid var(--line);}
  .iframeWrap iframe{position:absolute;inset:0;width:100%;height:100%;border:0;}
  .fallback{display:none;margin-top:10px;padding:12px;border-radius:14px;border:1px dashed rgba(255,207,90,.55);background:rgba(255,207,90,.08);line-height:1.7}
</style>
</head>
<body>
<div class="wrap">
  <div class="top">
    <div>
      <h1 style="margin:0 0 6px">ğŸ¬ ç¤ºç¯„å½±ç‰‡ï½œ<span id="stageTitle">ç¬¬ ? é—œ</span></h1>
      <div class="pill" id="modePill">æ¨¡å¼ï¼šå­¸ç”Ÿç‰ˆ</div>
    </div>
    <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
      <a class="link" href="index.html">â† å›æ•™å­¸é </a>
      <a class="link" id="openYT" target="_blank" rel="noopener">å‰å¾€ YouTube â†—</a>
    </div>
  </div>

  <div class="card">
    <div class="grid">
      <div class="iframeWrap">
        <iframe id="ytFrame"
          title="ç¤ºç¯„å½±ç‰‡"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen></iframe>
      </div>

      <div class="fallback" id="fallback">
        <b style="color:var(--warn)">æ­¤å½±ç‰‡ç›®å‰ä¸å…è¨±åœ¨å¤–éƒ¨ç¶²ç«™åµŒå…¥æ’­æ”¾ï¼ˆYouTube è¨­å®šé™åˆ¶ï¼‰ã€‚</b><br>
        è«‹æ”¹ç”¨ä¸‹æ–¹æŒ‰éˆ•åœ¨ YouTube è§€çœ‹ï¼š
        <div><a class="btn" id="openYTBtn" target="_blank" rel="noopener">â–¶ å‰å¾€ YouTube è§€çœ‹</a></div>
      </div>
    </div>
  </div>

  <div class="card teacherBox" id="teacherBox">
    <b>æ•™å¸«æç¤ºï¼ˆTeacher Notesï¼‰</b><br>
    <div id="teacherNotes"></div>
  </div>

  <div class="card" style="color:var(--muted);line-height:1.8">
    <b style="color:var(--text)">æ“ä½œèªªæ˜ï¼š</b>
    <div>â€¢ åƒæ•¸åˆ‡é—œå¡ï¼š<code>?stage=1</code> ~ <code>?stage=5</code></div>
    <div>â€¢ åˆ‡æ•™å¸«æ¨¡å¼ï¼š<code>&mode=teacher</code></div>
    <div>â€¢ ä¾‹ï¼š<code>video.html?stage=1&mode=teacher</code></div>
  </div>
</div>

<script>
(function(){
  const params = new URLSearchParams(location.search);
  const stage = Number(params.get("stage") || 1);
  const mode = (params.get("mode") || "student").toLowerCase();

  const STAGES = {
    1: { title: "ç¬¬ä¸€é—œï¼šæ“ç¸±è®Šå› ", yt: "https://youtube.com/shorts/FljFLq5gqrY",
         notes: "æå•ï¼šä½ ã€æ”¹ã€äº†ä»€éº¼ï¼Ÿä½ ã€é‡ã€åˆ°ä»€éº¼ï¼Ÿ<br>æé†’ï¼šä¸€æ¬¡åªæ”¹ä¸€å€‹è®Šå› ï¼Œå…¶ä»–å…ˆå›ºå®šã€‚" },
    2: { title: "ç¬¬äºŒé—œï¼šæ§åˆ¶è®Šå› ", yt: "https://youtube.com/shorts/FljFLq5gqrY",
         notes: "æå•ï¼šç‚ºä»€éº¼è¦å›ºå®šè§’åº¦/åˆé€Ÿï¼Ÿ<br>å»¶ä¼¸ï¼šä¸å›ºå®šæœƒé€ æˆä»€éº¼æ¯”è¼ƒä¸Šçš„å•é¡Œï¼Ÿ" },
    3: { title: "ç¬¬ä¸‰é—œï¼šåœ–è¡¨è½‰æ›", yt: "https://youtube.com/shorts/FljFLq5gqrY",
         notes: "æå•ï¼šå“ªäº›è³‡æ–™å¯ä»¥ç•¶ä½œè­‰æ“šï¼Ÿ<br>å»¶ä¼¸ï¼šåœ–è¡¨å¦‚ä½•å¹«åŠ©ä½ åšå‡ºçµè«–ï¼Ÿ" },
    4: { title: "ç¬¬å››é—œï¼šä»»å‹™å°è¦½", yt: "https://youtube.com/shorts/FljFLq5gqrY",
         notes: "æé†’ï¼šå…ˆè®€è¦å‰‡å†æ“ä½œã€‚<br>æå•ï¼šæœ¬é—œè¦æ±‚ä½ å›ºå®šä»€éº¼ï¼Ÿæ”¹è®Šä»€éº¼ï¼Ÿ" },
    5: { title: "ç¬¬äº”é—œï¼šä»»å‹™æ¸…å–®/æŒ‘æˆ°", yt: "https://youtube.com/shorts/FljFLq5gqrY",
         notes: "æå•ï¼šä½ å¦‚ä½•é©—è­‰è‡ªå·±çœŸçš„é€²æ­¥ï¼Ÿ<br>å»¶ä¼¸ï¼šå¦‚ä½•è¨­è¨ˆæ›´å…¬å¹³çš„è©•é‡æŒ‡æ¨™ï¼Ÿ" },
  };

  const data = STAGES[stage] || STAGES[1];

  document.getElementById("stageTitle").textContent = data.title;
  document.getElementById("modePill").textContent = "æ¨¡å¼ï¼š" + (mode === "teacher" ? "æ•™å¸«ç‰ˆ" : "å­¸ç”Ÿç‰ˆ");

  const openYT = document.getElementById("openYT");
  const openYTBtn = document.getElementById("openYTBtn");
  openYT.href = data.yt;
  openYTBtn.href = data.yt;

  const idMatch = data.yt.match(/shorts\/([A-Za-z0-9_-]+)/) || data.yt.match(/watch\?v=([A-Za-z0-9_-]+)/);
  const vid = idMatch ? idMatch[1] : "FljFLq5gqrY";
  const embed = "https://www.youtube-nocookie.com/embed/" + vid + "?rel=0&modestbranding=1&playsinline=1";

  document.getElementById("ytFrame").src = embed;

  const fallback = document.getElementById("fallback");
  setTimeout(() => { fallback.style.display = "block"; }, 900);

  if(mode === "teacher"){
    const box = document.getElementById("teacherBox");
    const notes = document.getElementById("teacherNotes");
    box.style.display = "block";
    notes.innerHTML = data.notes;
  }
})();
</script>
</body>
</html>
